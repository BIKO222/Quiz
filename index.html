<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI –í–∏–∫—Ç–æ—Ä–∏–Ω–∞</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
  <header>
    <div id="navbar">
      <nav>
        <a href="#home">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#about">–û –Ω–∞—Å</a>
        <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        <a href="#leaderboard">–†–µ–π—Ç–∏–Ω–≥</a>
      </nav>
      <button id="theme-toggle">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <!-- –§–æ—Ä–º—ã –¥–ª—è –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div id="auth-container">
    <div id="login-form">
      <h2>–í—Ö–æ–¥</h2>
      <form id="login">
        <input type="text" id="login-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required><br>
        <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å" required><br>
        <button type="submit">–í–æ–π—Ç–∏</button>
      </form>
      <p><a href="#" onclick="toggleForms()">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
    </div>
    <div id="register-form" style="display: none;">
      <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <form id="register">
        <input type="text" id="register-username" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required><br>
        <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" required><br>
        <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
      </form>
      <p><a href="#" onclick="toggleForms()">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a></p>
    </div>
  </div>

  <!-- –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ -->
  <div id="quiz-container">
    <h2>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–æ AI</h2>
    <div id="question-container"></div>
    <button id="submit-answer">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
    <div id="result"></div>
    <div id="rating"></div>
  </div>

  <script>
    let currentUser = null;
    const users = JSON.parse(localStorage.getItem('users')) || [];

    function toggleForms() {
      const loginForm = document.getElementById("login-form");
      const registerForm = document.getElementById("register-form");
      loginForm.style.display = loginForm.style.display === "none" ? "block" : "none";
      registerForm.style.display = registerForm.style.display === "none" ? "block" : "none";
    }

    // –°–º–µ–Ω–∞ —Ç–µ–º—ã
    const themeToggle = document.getElementById("theme-toggle");
    themeToggle.addEventListener("click", () => {
      document.body.classList.toggle("light-theme");
    });

    // –õ–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞
    document.getElementById("login").addEventListener("submit", function(event) {
      event.preventDefault();
      const username = document.getElementById("login-username").value.trim();
      const password = document.getElementById("login-password").value.trim();
      const user = users.find(user => user.username === username && user.password === password);
      if (user) {
        currentUser = user;
        alert("–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!");
        showQuiz();
      } else {
        alert("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
      }
    });

    // –õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    document.getElementById("register").addEventListener("submit", function(event) {
      event.preventDefault();
      const username = document.getElementById("register-username").value.trim();
      const password = document.getElementById("register-password").value.trim();
      if (users.some(user => user.username === username)) {
        alert("–¢–∞–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!");
      } else {
        const newUser = { username, password, score: 0 };
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));
        alert("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!");
        toggleForms();
      }
    });

    // –í–∏–∫—Ç–æ—Ä–∏–Ω–∞
    const quizQuestions = [
      {
        question: "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç AI?",
        options: ["–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å", "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç"],
        answer: "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç"
      },
      {
        question: "–ö–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FIFO?",
        options: ["–°—Ç–µ–∫", "–û—á–µ—Ä–µ–¥—å"],
        answer: "–û—á–µ—Ä–µ–¥—å"
      }
    ];

    let currentQuestionIndex = 0;
    let score = 0;

    function displayQuestion() {
      const container = document.getElementById("question-container");
      if (currentQuestionIndex < quizQuestions.length) {
        const q = quizQuestions[currentQuestionIndex];
        container.innerHTML = ` 
          <p>${q.question}</p>
          ${q.options.map(option => ` 
            <label><input type="radio" name="question" value="${option}"> ${option}</label>
          `).join('')}
        `;
      } else {
        showResult();
      }
    }

    function showResult() {
      document.getElementById("question-container").innerHTML = "";
      document.getElementById("submit-answer").style.display = "none";
      document.getElementById("result").innerHTML = ` 
        <p>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</p>
        <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ ${quizQuestions.length}</p>
      `;
      if (currentUser) {
        currentUser.score += score;
        localStorage.setItem('users', JSON.stringify(users));
        showRating();
      }
    }

    function showQuiz() {
      document.getElementById("auth-container").style.display = "none";
      document.getElementById("quiz-container").style.display = "block";
      displayQuestion();
    }

    document.getElementById("submit-answer").addEventListener("click", function() {
      const selected = document.querySelector('input[name="question"]:checked');
      if (selected) {
        const answer = selected.value;
        if (answer === quizQuestions[currentQuestionIndex].answer) {
          score++;
        }
        currentQuestionIndex++;
        displayQuestion();
      } else {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞.");
      }
    });

    function showRating() {
      const ratingDiv = document.getElementById("rating");
      const sortedUsers = [...users].sort((a, b) => b.score - a.score);
      ratingDiv.innerHTML = `<h3>–†–µ–π—Ç–∏–Ω–≥:</h3>
        <ol>
          ${sortedUsers.map(user => `<li>${user.username} ‚Äî ${user.score} –±–∞–ª–ª–æ–≤</li>`).join('')}
        </ol>`;
      ratingDiv.style.display = "block";
    }

  </script>
</body>
</html>
